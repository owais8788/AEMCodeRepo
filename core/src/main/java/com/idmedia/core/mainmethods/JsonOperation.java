package com.idmedia.core.mainmethods;


import com.google.gson.Gson;
import com.google.gson.JsonArray;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;

import java.util.Map;
import java.util.Set;

public class JsonOperation {
    public static void main(String[] args) {
        String jsonString = "{\"items\":{\"contentfragment\":{\"id\":\"contentfragment-319137a336\",\"description\":\"\",\"title\":\"Banner\",\":type\":\"techcombank/components/proxy/contentfragment\",\":itemsOrder\":[],\"model\":\"techcombank/mobile-app/models/banner-content-fragment\",\":items\":{},\"elements\":{\"id\":{\"value\":\"Banner-01\",\"title\":\"ID\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"titleTextForCta\":{\"value\":\"Thinking of buying your dream home\",\"title\":\"Title Text For CTA\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"description\":{\"value\":\"<p>Find out how we can help you<br>\\n</p>\\n\",\"title\":\"Description\",\"dataType\":\"string\",\":type\":\"text/html\",\"multiValue\":false},\"iconImage\":{\"value\":\"http://localhost:4503/content/dam/techcombank/rdb-app/images/New image.png\",\"title\":\"Icon Image\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"backgroundImage\":{\"value\":\"http://localhost:4503/content/dam/techcombank/rdb-app/images/banner bg.png\",\"title\":\"Background Image\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"ctaText\":{\"value\":\"See how\",\"title\":\"CTA Text\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"ctaLink\":{\"value\":\"#\",\"title\":\"CTA Link\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"sequence\":{\"value\":1.0,\"title\":\"Sequence\",\"dataType\":\"double\",\":type\":\"double\",\"multiValue\":false},\"bannerCategory\":{\"value\":[\"techcombank:articles/article-type/video\",\"techcombank:promotion-categories/travel-and-food-ordering\"],\"title\":\"Banner Category\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":true}},\"elementsOrder\":[\"id\",\"titleTextForCta\",\"description\",\"iconImage\",\"backgroundImage\",\"ctaText\",\"ctaLink\",\"sequence\",\"bannerCategory\"]},\"contentfragment_1642249114\":{\"id\":\"contentfragment-ee6bee0dba\",\"description\":\"\",\"title\":\"card overview\",\":type\":\"techcombank/components/proxy/contentfragment\",\":itemsOrder\":[],\"model\":\"techcombank/mobile-app/models/card-overview-content-fragment\",\":items\":{},\"elements\":{\"id\":{\"value\":\"overview-card1\",\"title\":\"ID\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"title\":{\"value\":\"For home buyer\",\"title\":\"Title\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"description\":{\"value\":\"<p><b>Faster home buying with a fixed interest rate and personalised loan plan</b></p>\\n\",\"title\":\"Description\",\"dataType\":\"string\",\":type\":\"text/html\",\"multiValue\":false},\"iconImage\":{\"value\":\"http://localhost:4503/content/dam/techcombank/rdb-app/images/homeicon.png\",\"title\":\"Icon\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"backgroundImage\":{\"value\":\"http://localhost:4503/content/dam/techcombank/adobe-qa/simpleBanner-1.jpg\",\"title\":\"Background Image\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"listIconImage\":{\"value\":\"http://localhost:4503/content/dam/techcombank/rdb-app/images/selecticon.png\",\"title\":\"List Icon\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"listItem\":{\"value\":[\"0% interest period by projects\",\"Grace period for fixed deposit\",\"Free administrative assistance\"],\"title\":\"List Item\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":true},\"ctaUrl\":{\"value\":\"https://techcombank.com/en/about-us\",\"title\":\"CTA URL\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"cardAlignment\":{\"value\":\"center\",\"title\":\"Card Alignment\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false}},\"elementsOrder\":[\"id\",\"title\",\"description\",\"iconImage\",\"backgroundImage\",\"listIconImage\",\"listItem\",\"ctaUrl\",\"cardAlignment\"]},\"contentfragment_1315023776\":{\"id\":\"contentfragment-b9ea77f065\",\"description\":\"\",\"title\":\"card overview\",\":type\":\"techcombank/components/proxy/contentfragment\",\":itemsOrder\":[],\"model\":\"techcombank/mobile-app/models/card-overview-content-fragment\",\":items\":{},\"elements\":{\"id\":{\"value\":\"overview-card1\",\"title\":\"ID\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"title\":{\"value\":\"For home buyer\",\"title\":\"Title\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"description\":{\"value\":\"<p><b>Faster home buying with a fixed interest rate and personalised loan plan</b></p>\\n\",\"title\":\"Description\",\"dataType\":\"string\",\":type\":\"text/html\",\"multiValue\":false},\"iconImage\":{\"value\":\"http://localhost:4503/content/dam/techcombank/rdb-app/images/homeicon.png\",\"title\":\"Icon\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"backgroundImage\":{\"value\":\"http://localhost:4503/content/dam/techcombank/adobe-qa/simpleBanner-1.jpg\",\"title\":\"Background Image\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"listIconImage\":{\"value\":\"http://localhost:4503/content/dam/techcombank/rdb-app/images/selecticon.png\",\"title\":\"List Icon\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"listItem\":{\"value\":[\"0% interest period by projects\",\"Grace period for fixed deposit\",\"Free administrative assistance\"],\"title\":\"List Item\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":true},\"ctaUrl\":{\"value\":\"https://techcombank.com/en/about-us\",\"title\":\"CTA URL\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"cardAlignment\":{\"value\":\"center\",\"title\":\"Card Alignment\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false}},\"elementsOrder\":[\"id\",\"title\",\"description\",\"iconImage\",\"backgroundImage\",\"listIconImage\",\"listItem\",\"ctaUrl\",\"cardAlignment\"]},\"contentfragment_1537627207\":{\"id\":\"contentfragment-6cfd9b5356\",\"description\":\"LICFT Description\",\"title\":\"List Item\",\":type\":\"techcombank/components/proxy/contentfragment\",\":itemsOrder\":[],\"model\":\"techcombank/mobile-app/models/list-item-content-fragment\",\":items\":{},\"elements\":{\"id\":{\"value\":\"Listitem-01\",\"title\":\"ID\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"title\":{\"value\":\"Get advice from our home experts\",\"title\":\"Title\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"description\":{\"value\":\"<p>Make confident decisions with advice from our dedicated home experts <br>\\n</p>\\n\",\"title\":\"Description\",\"dataType\":\"string\",\":type\":\"text/html\",\"multiValue\":false},\"iconImage\":{\"value\":\"http://localhost:4503/content/dam/techcombank/rdb-app/images/numeric1.png\",\"title\":\"Icon\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false},\"link\":{\"value\":\"/content/dam/techcombank/tcb_qa/dev/SimpleBanner.png\",\"title\":\"Link\",\"dataType\":\"string\",\":type\":\"string\",\"multiValue\":false}},\"elementsOrder\":[\"id\",\"title\",\"description\",\"iconImage\",\"link\"]},\"contentfragment_1087422001\":{\"id\":\"contentfragment-937a47b24c\",\":type\":\"techcombank/components/proxy/contentfragment\",\":itemsOrder\":[],\":items\":{},\"elements\":{},\"elementsOrder\":[]}},\":itemsOrder\":[\"contentfragment\",\"contentfragment_1642249114\",\"contentfragment_1315023776\",\"contentfragment_1537627207\",\"contentfragment_1087422001\"],\"Success\":\"true\"}"; // Replace with your JSON string

        Gson gson = new Gson();
        JsonObject convertedObject = new Gson().fromJson(jsonString, JsonObject.class);
            System.out.println(getJsonArray(convertedObject));

        }


    private static JsonObject getJsonArray(final JsonObject convertedObject) {
        if (convertedObject.has("items") && convertedObject.get("items").isJsonObject()) {
            JsonObject itemsObject = convertedObject.getAsJsonObject("items");
            Set<Map.Entry<String, JsonElement>> entries = itemsObject.entrySet();

            //iterate the entries to get all key-value pairs
            JsonArray jsonArray = new JsonArray();
            for (Map.Entry<String, JsonElement> entry : entries) {
                jsonArray.add(entry.getValue());
            }
            convertedObject.remove("items");
            convertedObject.add("items", jsonArray);
            return convertedObject;
        } else {
            return null;
        }

    }
}